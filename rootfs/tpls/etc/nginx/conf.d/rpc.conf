server {
    listen unix:/comm/rtorrent_rpc.sock;

    root /dev/null;

    auth_basic "@XMLRPC_AUTHBASIC_STRING@";
    auth_basic_user_file /passwd/rpc.htpasswd;

    client_max_body_size @XMLRPC_SIZE_LIMIT@;

    location / {
        include /etc/nginx/scgi_params;
        scgi_pass unix:/var/run/rtorrent/scgi.socket;
    }
}

server {
    listen unix:/comm/rtorrent_rpc_health.sock;

    access_log off;
    error_log /dev/null;

    root /dev/null;

    location / {
        allow 127.0.0.1;
        deny all;
        include /etc/nginx/scgi_params;
        scgi_pass unix:/var/run/rtorrent/scgi.socket;
    }
}
